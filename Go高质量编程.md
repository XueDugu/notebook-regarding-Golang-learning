Go高质量编程

高质量编程：编写的代码能够达到正确可靠、简阶清晰的目标可称之位高质量代码，各种边界情况要考虑完备，异常情况处理，稳定性保障，易读易维护。

编程原则：简单性、可读性、生产力。

简单性：消除“多余的复杂性”，以简单清晰的逻辑编写代码，不理解的代码无法修复改进。

可读性：代码是写给人看的，而不是机器，编写可维护代码的第一步是确保代码可读。

生产力：团队整体工作效率非常重要。

注释：公共符号始终要注释，不明显也不简短的公共功能要注释，函数必须注释，注释应该解释代码作用、代码如何做的、代码实现的原因、代码出错情况。

推荐使用gofmt和goimports，vsc中能自动格式化

命名规范：简洁胜于冗长。缩略词全大写（开头不导出全小写），变量使用距离越远携带信息应越多，函数名不携带上下文，包名只小写，简短包含上下文，与标准库区分。

控制流程：避免嵌套，保持正常流程清晰，尽量保持正常代码路径为最小缩进，提升代码可维护性和可读性。

错误和异常处理：仅出现一次的简单错误优先用errors.New来直接表示，如果需要格式化，使用fmt.Errorf；错误的Wrap是error嵌套error，在fmt.Errorf中使用%w关联之错误链；可以使用errors.Is判定是否为特定错误；可以使用errors.As在错误链上获取特定种类错误；不建议在业务代码中用panic，调用若不包含recover会导致程序崩溃，可以用error代替panic，若错误不可逆转可以在init或main函数中使用panic；recover只能在defer函数中使用，嵌套不生效，只能在当前goroutine生效，defer先进后出，可以在recover后log中记录调用栈。